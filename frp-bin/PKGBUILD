# Maintainer: banbanchs <memory.silentvoyage@gmail.com>

pkgname=frp-bin
_pkgname=frp
pkgver=0.9.2
pkgrel=1
pkgdesc="A fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet."
url="https://github.com/fatedier/frp"
license=("Apache")
arch=("i686" "x86_64")
provides=("frp")
conflicts=("frp" "frp-git")
depends=("glibc")
source_i686=("https://github.com/fatedier/frp/releases/download/v${pkgver}/${_pkgname}_${pkgver}_linux_386.tar.gz")
source_x86_64=("https://github.com/fatedier/frp/releases/download/v${pkgver}/${_pkgname}_${pkgver}_linux_amd64.tar.gz")
sha256sums_i686=('4d2bfc40b9a2ccb4e25f966df3074e65a21a228e6aae57871eef9ee3cb8dac92')
sha256sums_x86_64=('80fd4de37f150a5d2fd4b17861779d9b540dea006b68b6751397faae5da79d79')

package() {
  cd "${srcdir}/${_pkgname}_${pkgver}_linux_amd64"

  mkdir -p "${pkgdir}/etc/${_pkgname}"

  for bin in "frpc" "frps"; do
      install -Dm755 "${bin}" "${pkgdir}/usr/bin/${bin}"
      install -Dm644 "${bin}.ini" "${pkgdir}/etc/${_pkgname}/${bin}.ini"
      install -Dm644 "${bin}_min.ini" "${pkgdir}/etc/${_pkgname}/${bin}_min.ini"
  done
}

